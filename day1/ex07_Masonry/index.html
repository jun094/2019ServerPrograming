<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title></title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }
    .box {
      background: black;
      margin: 5px;
    }
  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
  <script>
    $(document).ready(function() {
      for (var i = 0; i < 100; i++) {
        $('<div></div>').addClass('box').css({
          width: 100,
          height: Math.floor(Math.random() * 100) + 50
        }).appendTo('.grid');
      };
      $('.grid').masonry({
        //itemSelector : '.grid-item',
        columnWidth: 110
      });
    });

    var appendDocument = function(){
      for (var i = 0; i < 100; i++) {
        var elem = $('<div></div>').addClass('box').css({
          width: 100,
          height: Math.floor(Math.random() * 100) + 50
        })

        var $grid = $('.grid').masonry({
               columnWidth: 110
           });
           $grid.masonry()
               .append(elem)
               .masonry('appended', elem)
               .masonry();
       }

    };

    $(window).scroll(function() {
      var scrollHeight = $(window).scrollTop() + $(window).height();
      var documentHeight = $(document).height();

      if (scrollHeight == documentHeight) {
        appendDocument();
      }
    });
  </script>
</head>

<body>
  <div class="grid"></div>
</body>

</html>
